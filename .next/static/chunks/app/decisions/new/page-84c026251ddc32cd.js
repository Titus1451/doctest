(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58],{2529:function(e,t,n){Promise.resolve().then(n.bind(n,2325)),Promise.resolve().then(n.bind(n,9372))},2325:function(e,t,n){"use strict";n.d(t,{DecisionForm:function(){return p}});var s=n(7437),r=n(2265),l=n(4508);n(3079);var a=(0,n(2119).$)("a27334549c40f73d31efc77c023d42e0a2848918"),i=n(1402),o=n(5186),c=n(6818),d=n(6815),u=n(4887),f=n(8685);function m(){let{pending:e}=(0,u.useFormStatus)();return(0,s.jsx)(i.z,{type:"submit",disabled:e,children:e?"Saving...":"Save Decision"})}function p(){let[e,t]=r.useState([]),[n,u]=r.useState(""),[p,x]=r.useState([]),[h,v]=r.useState(!1),[b,y]=r.useState([]),j=r.useRef(null),g=n=>{t(e.filter(e=>e!==n))},N=e=>{p.includes(e)?x(p.filter(t=>t!==e)):x([...p,e])},w=e=>{y(b.filter((t,n)=>n!==e))},C=async t=>{b.forEach(e=>{t.append("files",e)}),e.forEach(e=>{t.append("links",e)}),p.forEach(e=>{t.append("jurisdictions",e)}),await a(t)};return(0,s.jsxs)("form",{action:C,className:"space-y-6 max-w-2xl bg-white p-8 rounded-xl border shadow-sm",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d._,{htmlFor:"title",children:"Title"}),(0,s.jsx)(o.I,{id:"title",name:"title",placeholder:"e.g. VAT treatment of digital services 2024",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d._,{htmlFor:"summary",children:"Summary"}),(0,s.jsx)(o.I,{id:"summary",name:"summary",placeholder:"Brief overview of the decision",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d._,{children:"Jurisdictions"}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("div",{className:"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-slate-200 bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-white placeholder:text-slate-500 focus:outline-none focus:ring-1 focus:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",children:(0,s.jsx)("span",{className:"truncate",children:p.length>0?p.join(", "):"Select jurisdictions..."})}),(0,s.jsx)("div",{className:"absolute top-full left-0 z-50 w-full min-w-[8rem] overflow-hidden rounded-md border bg-white text-slate-950 shadow-md animate-in fade-in-0 zoom-in-95 hidden group-hover:block hover:block",children:(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto p-1",children:f.h.map(e=>(0,s.jsxs)("div",{className:(0,l.cn)("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-slate-100 hover:text-slate-900",p.includes(e.code)&&"bg-slate-50 font-medium"),onClick:()=>N(e.code),children:[(0,s.jsx)("div",{className:(0,l.cn)("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-slate-300",p.includes(e.code)?"bg-slate-900 border-slate-900 text-white":"bg-transparent"),children:p.includes(e.code)&&(0,s.jsx)("span",{className:"h-2 w-2 bg-current rounded-sm"})}),(0,s.jsxs)("span",{children:[e.name," ",(0,s.jsxs)("span",{className:"text-xs text-slate-400 ml-1",children:["(",e.code,")"]})]})]},e.code))})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d._,{htmlFor:"taxType",children:"Tax Type"}),h?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.I,{id:"taxType",name:"taxType",placeholder:"Enter custom tax type...",autoFocus:!0}),(0,s.jsx)(i.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>v(!1),title:"Back to list",children:"âœ•"})]}):(0,s.jsxs)("select",{id:"taxTypeSelect",className:"flex h-9 w-full rounded-md border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950",onChange:e=>{"CUSTOM_PLUS"===e.target.value&&v(!0)},name:h?void 0:"taxType",defaultValue:"",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select Tax Type..."}),(0,s.jsx)("option",{value:"Sales Tax",children:"Sales Tax"}),(0,s.jsx)("option",{value:"Meals Tax",children:"Meals Tax"}),(0,s.jsx)("option",{value:"Alcohol Tax",children:"Alcohol Tax"}),(0,s.jsx)("option",{value:"CUSTOM_PLUS",children:"+ Add Custom"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d._,{htmlFor:"status",children:"Status"}),(0,s.jsxs)("select",{id:"status",name:"status",className:"flex h-9 w-full rounded-md border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950",children:[(0,s.jsx)("option",{value:"DRAFT",children:"Draft"}),(0,s.jsx)("option",{value:"FINAL",children:"Final"}),(0,s.jsx)("option",{value:"DEPRECATED",children:"Deprecated"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d._,{htmlFor:"rationale",children:"Rationale & Reasoning"}),(0,s.jsx)(c.g,{id:"rationale",name:"rationale",className:"min-h-[200px]",placeholder:"Detailed explanation of the decision, references to laws, etc.",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,s.jsx)("h3",{className:"font-medium text-slate-900",children:"Supporting Evidence"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d._,{children:"Upload Files (PDF, Images, Docs)"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.z,{type:"button",variant:"secondary",onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},children:"Choose Files"}),(0,s.jsx)("input",{ref:j,type:"file",multiple:!0,className:"hidden",onChange:e=>{if(e.target.files&&e.target.files.length>0){let t=Array.from(e.target.files);y(e=>[...e,...t]),j.current&&(j.current.value="")}}})]}),b.length>0&&(0,s.jsx)("div",{className:"space-y-2 mt-2",children:b.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,s.jsx)("span",{className:"font-medium text-slate-700 truncate",children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-slate-400",children:["(",(e.size/1024).toFixed(1)," KB)"]})]}),(0,s.jsx)("button",{type:"button",onClick:()=>w(t),className:"text-red-500 hover:text-red-700 ml-2",children:"Remove"})]},t))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d._,{children:"External Links"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.I,{value:n,onChange:e=>u(e.target.value),placeholder:"https://...",type:"url"}),(0,s.jsx)(i.z,{type:"button",onClick:()=>{n&&!e.includes(n)&&(t([...e,n]),u(""))},variant:"secondary",children:"Add"})]}),e.length>0&&(0,s.jsx)("div",{className:"space-y-2 mt-2",children:e.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded text-sm",children:[(0,s.jsx)("span",{className:"truncate flex-1",children:e}),(0,s.jsx)("button",{type:"button",onClick:()=>g(e),className:"text-red-500 hover:text-red-700 ml-2",children:"Remove"})]},t))})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,s.jsx)(i.z,{variant:"outline",type:"button",onClick:()=>window.history.back(),children:"Cancel"}),(0,s.jsx)(m,{})]})]})}},9372:function(e,t,n){"use strict";n.d(t,{Header:function(){return r}});var s=n(7437);function r(e){let{title:t,children:n}=e;return(0,s.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-white px-8",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-slate-900",children:t}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:n})]})}},1402:function(e,t,n){"use strict";let s,r;n.d(t,{z:function(){return j}});var l=n(7437),a=n(2265),i=n.t(a,2),o=n(8575),c=Symbol.for("react.lazy"),d=i[" use ".trim().toString()];function u(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===c&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var f=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:n,...s}=e;if(u(n)&&"function"==typeof d&&(n=d(n._payload)),a.isValidElement(n)){var r;let e,l;let i=(r=n,(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref),c=function(e,t){let n={...t};for(let s in t){let r=e[s],l=t[s];/^on[A-Z]/.test(s)?r&&l?n[s]=(...e)=>{let t=l(...e);return r(...e),t}:r&&(n[s]=r):"style"===s?n[s]={...r,...l}:"className"===s&&(n[s]=[r,l].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==a.Fragment&&(c.ref=t?(0,o.F)(t,i):i),a.cloneElement(n,c)}return a.Children.count(n)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=a.forwardRef((e,n)=>{let{children:s,...r}=e;u(s)&&"function"==typeof d&&(s=d(s._payload));let i=a.Children.toArray(s),o=i.find(p);if(o){let e=o.props.children,s=i.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...r,ref:n,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,l.jsx)(t,{...r,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}("Slot"),m=Symbol("radix.slottable");function p(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}var x=n(1994);let h=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,v=x.W;var b=n(4508);let y=(s="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none disabled:opacity-50",r={variants:{variant:{default:"bg-slate-900 text-slate-50 shadow hover:bg-slate-900/90",destructive:"bg-red-500 text-slate-50 shadow-sm hover:bg-red-500/90",outline:"border border-slate-200 bg-white shadow-sm hover:bg-slate-100 hover:text-slate-900",secondary:"bg-slate-100 text-slate-900 shadow-sm hover:bg-slate-100/80",ghost:"hover:bg-slate-100 hover:text-slate-900",link:"text-slate-900 underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==r?void 0:r.variants)==null)return v(s,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:n,defaultVariants:l}=r,a=Object.keys(n).map(t=>{let s=null==e?void 0:e[t],r=null==l?void 0:l[t];if(null===s)return null;let a=h(s)||h(r);return n[t][a]}),i=e&&Object.entries(e).reduce((e,t)=>{let[n,s]=t;return void 0===s||(e[n]=s),e},{});return v(s,a,null==r?void 0:null===(t=r.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:n,className:s,...r}=t;return Object.entries(r).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...l,...i}[t]):({...l,...i})[t]===n})?[...e,n,s]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),j=a.forwardRef((e,t)=>{let{className:n,variant:s,size:r,asChild:a=!1,...i}=e,o=a?f:"button";return(0,l.jsx)(o,{className:(0,b.cn)(y({variant:s,size:r,className:n})),ref:t,...i})});j.displayName="Button"},5186:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var s=n(7437),r=n(2265),l=n(4508);let a=r.forwardRef((e,t)=>{let{className:n,type:r,...a}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...a})});a.displayName="Input"},6815:function(e,t,n){"use strict";n.d(t,{_:function(){return a}});var s=n(7437),r=n(2265),l=n(4508);let a=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("label",{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n),...r})});a.displayName="Label"},6818:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var s=n(7437),r=n(2265),l=n(4508);let a=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-slate-200 bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...r})});a.displayName="Textarea"},8685:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});let s=[{code:"US",name:"United States",type:"COUNTRY"},{code:"US-TX",name:"Texas",type:"STATE"},{code:"US-TN",name:"Tennessee",type:"STATE"},{code:"US-CA",name:"California",type:"STATE"},{code:"US-NY",name:"New York",type:"STATE"},{code:"CA",name:"Canada",type:"COUNTRY"},{code:"CA-ON",name:"Ontario",type:"PROVINCE"},{code:"CA-BC",name:"British Columbia",type:"PROVINCE"},{code:"CA-AB",name:"Alberta",type:"PROVINCE"}]},4508:function(e,t,n){"use strict";n.d(t,{cn:function(){return l}});var s=n(1994),r=n(3335);function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,s.W)(t))}},2119:function(e,t,n){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return r}});let s=n(3079);function r(e){let{createServerReference:t}=n(6671);return t(e,s.callServer)}},8575:function(e,t,n){"use strict";n.d(t,{F:function(){return l},e:function(){return a}});var s=n(2265);function r(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function l(...e){return t=>{let n=!1,s=e.map(e=>{let s=r(e,t);return n||"function"!=typeof s||(n=!0),s});if(n)return()=>{for(let t=0;t<s.length;t++){let n=s[t];"function"==typeof n?n():r(e[t],null)}}}}function a(...e){return s.useCallback(l(...e),e)}}},function(e){e.O(0,[137,971,117,744],function(){return e(e.s=2529)}),_N_E=e.O()}]);