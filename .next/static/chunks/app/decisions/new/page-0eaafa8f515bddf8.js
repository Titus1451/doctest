(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58],{2529:function(e,t,s){Promise.resolve().then(s.bind(s,2325)),Promise.resolve().then(s.bind(s,9372))},2325:function(e,t,s){"use strict";s.d(t,{DecisionForm:function(){return m}});var n=s(7437),l=s(2265),r=s(4508);s(3079);var a=(0,s(2119).$)("a27334549c40f73d31efc77c023d42e0a2848918"),i=s(1402),o=s(5186),c=s(6818),d=s(6815),u=s(4887);function f(){let{pending:e}=(0,u.useFormStatus)();return(0,n.jsx)(i.z,{type:"submit",disabled:e,children:e?"Saving...":"Save Decision"})}function m(e){let{jurisdictions:t}=e,[s,u]=l.useState([]),[m,p]=l.useState(""),[x,h]=l.useState([]),[v,b]=l.useState(!1),[y,j]=l.useState([]),g=l.useRef(null),N=e=>{u(s.filter(t=>t!==e))},w=e=>{x.includes(e)?h(x.filter(t=>t!==e)):h([...x,e])},S=e=>{j(y.filter((t,s)=>s!==e))},C=async e=>{y.forEach(t=>{e.append("files",t)}),s.forEach(t=>{e.append("links",t)}),x.forEach(t=>{e.append("jurisdictions",t)}),await a(e)};return(0,n.jsxs)("form",{action:C,className:"space-y-6 max-w-2xl bg-white p-8 rounded-xl border shadow-sm",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{htmlFor:"title",children:"Title"}),(0,n.jsx)(o.I,{id:"title",name:"title",placeholder:"e.g. VAT treatment of digital services 2024",required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{htmlFor:"summary",children:"Summary"}),(0,n.jsx)(o.I,{id:"summary",name:"summary",placeholder:"Brief overview of the decision",required:!0})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{children:"Jurisdictions"}),(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsx)("div",{className:"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-slate-200 bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-white placeholder:text-slate-500 focus:outline-none focus:ring-1 focus:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",children:(0,n.jsx)("span",{className:"truncate",children:x.length>0?x.join(", "):"Select jurisdictions..."})}),(0,n.jsx)("div",{className:"absolute top-full left-0 z-50 w-full min-w-[8rem] overflow-hidden rounded-md border bg-white text-slate-950 shadow-md animate-in fade-in-0 zoom-in-95 hidden group-hover:block hover:block",children:(0,n.jsx)("div",{className:"max-h-64 overflow-y-auto p-1",children:t.map(e=>(0,n.jsxs)("div",{className:(0,r.cn)("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-slate-100 hover:text-slate-900",x.includes(e.code)&&"bg-slate-50 font-medium"),onClick:()=>w(e.code),children:[(0,n.jsx)("div",{className:(0,r.cn)("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-slate-300",x.includes(e.code)?"bg-slate-900 border-slate-900 text-white":"bg-transparent"),children:x.includes(e.code)&&(0,n.jsx)("span",{className:"h-2 w-2 bg-current rounded-sm"})}),(0,n.jsxs)("span",{children:[e.name," ",(0,n.jsxs)("span",{className:"text-xs text-slate-400 ml-1",children:["(",e.code,")"]})]})]},e.id))})})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{htmlFor:"taxType",children:"Tax Type"}),v?(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(o.I,{id:"taxType",name:"taxType",placeholder:"Enter custom tax type...",autoFocus:!0}),(0,n.jsx)(i.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>b(!1),title:"Back to list",children:"âœ•"})]}):(0,n.jsxs)("select",{id:"taxTypeSelect",className:"flex h-9 w-full rounded-md border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950",onChange:e=>{"CUSTOM_PLUS"===e.target.value&&b(!0)},name:v?void 0:"taxType",defaultValue:"",children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Select Tax Type..."}),(0,n.jsx)("option",{value:"Sales Tax",children:"Sales Tax"}),(0,n.jsx)("option",{value:"Meals Tax",children:"Meals Tax"}),(0,n.jsx)("option",{value:"Alcohol Tax",children:"Alcohol Tax"}),(0,n.jsx)("option",{value:"CUSTOM_PLUS",children:"+ Add Custom"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{htmlFor:"status",children:"Status"}),(0,n.jsxs)("select",{id:"status",name:"status",className:"flex h-9 w-full rounded-md border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950",children:[(0,n.jsx)("option",{value:"DRAFT",children:"Draft"}),(0,n.jsx)("option",{value:"FINAL",children:"Final"}),(0,n.jsx)("option",{value:"DEPRECATED",children:"Deprecated"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{htmlFor:"rationale",children:"Rationale & Reasoning"}),(0,n.jsx)(c.g,{id:"rationale",name:"rationale",className:"min-h-[200px]",placeholder:"Detailed explanation of the decision, references to laws, etc.",required:!0})]}),(0,n.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,n.jsx)("h3",{className:"font-medium text-slate-900",children:"Supporting Evidence"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{children:"Upload Files (PDF, Images, Docs)"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(i.z,{type:"button",variant:"secondary",onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},children:"Choose Files"}),(0,n.jsx)("input",{ref:g,type:"file",multiple:!0,className:"hidden",onChange:e=>{if(e.target.files&&e.target.files.length>0){let t=Array.from(e.target.files);j(e=>[...e,...t]),g.current&&(g.current.value="")}}})]}),y.length>0&&(0,n.jsx)("div",{className:"space-y-2 mt-2",children:y.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,n.jsx)("span",{className:"font-medium text-slate-700 truncate",children:e.name}),(0,n.jsxs)("span",{className:"text-xs text-slate-400",children:["(",(e.size/1024).toFixed(1)," KB)"]})]}),(0,n.jsx)("button",{type:"button",onClick:()=>S(t),className:"text-red-500 hover:text-red-700 ml-2",children:"Remove"})]},t))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{children:"External Links"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(o.I,{value:m,onChange:e=>p(e.target.value),placeholder:"https://...",type:"url"}),(0,n.jsx)(i.z,{type:"button",onClick:()=>{m&&!s.includes(m)&&(u([...s,m]),p(""))},variant:"secondary",children:"Add"})]}),s.length>0&&(0,n.jsx)("div",{className:"space-y-2 mt-2",children:s.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded text-sm",children:[(0,n.jsx)("span",{className:"truncate flex-1",children:e}),(0,n.jsx)("button",{type:"button",onClick:()=>N(e),className:"text-red-500 hover:text-red-700 ml-2",children:"Remove"})]},t))})]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,n.jsx)(i.z,{variant:"outline",type:"button",onClick:()=>window.history.back(),children:"Cancel"}),(0,n.jsx)(f,{})]})]})}},9372:function(e,t,s){"use strict";s.d(t,{Header:function(){return l}});var n=s(7437);function l(e){let{title:t,children:s}=e;return(0,n.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-white px-8",children:[(0,n.jsx)("h1",{className:"text-xl font-semibold text-slate-900",children:t}),(0,n.jsx)("div",{className:"flex items-center gap-4",children:s})]})}},1402:function(e,t,s){"use strict";let n,l;s.d(t,{z:function(){return j}});var r=s(7437),a=s(2265),i=s.t(a,2),o=s(8575),c=Symbol.for("react.lazy"),d=i[" use ".trim().toString()];function u(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===c&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var f=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:s,...n}=e;if(u(s)&&"function"==typeof d&&(s=d(s._payload)),a.isValidElement(s)){var l;let e,r;let i=(l=s,(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.ref:(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.props.ref:l.props.ref||l.ref),c=function(e,t){let s={...t};for(let n in t){let l=e[n],r=t[n];/^on[A-Z]/.test(n)?l&&r?s[n]=(...e)=>{let t=r(...e);return l(...e),t}:l&&(s[n]=l):"style"===n?s[n]={...l,...r}:"className"===n&&(s[n]=[l,r].filter(Boolean).join(" "))}return{...e,...s}}(n,s.props);return s.type!==a.Fragment&&(c.ref=t?(0,o.F)(t,i):i),a.cloneElement(s,c)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=a.forwardRef((e,s)=>{let{children:n,...l}=e;u(n)&&"function"==typeof d&&(n=d(n._payload));let i=a.Children.toArray(n),o=i.find(p);if(o){let e=o.props.children,n=i.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...l,ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,r.jsx)(t,{...l,ref:s,children:n})});return s.displayName=`${e}.Slot`,s}("Slot"),m=Symbol("radix.slottable");function p(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}var x=s(1994);let h=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,v=x.W;var b=s(4508);let y=(n="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none disabled:opacity-50",l={variants:{variant:{default:"bg-slate-900 text-slate-50 shadow hover:bg-slate-900/90",destructive:"bg-red-500 text-slate-50 shadow-sm hover:bg-red-500/90",outline:"border border-slate-200 bg-white shadow-sm hover:bg-slate-100 hover:text-slate-900",secondary:"bg-slate-100 text-slate-900 shadow-sm hover:bg-slate-100/80",ghost:"hover:bg-slate-100 hover:text-slate-900",link:"text-slate-900 underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==l?void 0:l.variants)==null)return v(n,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:s,defaultVariants:r}=l,a=Object.keys(s).map(t=>{let n=null==e?void 0:e[t],l=null==r?void 0:r[t];if(null===n)return null;let a=h(n)||h(l);return s[t][a]}),i=e&&Object.entries(e).reduce((e,t)=>{let[s,n]=t;return void 0===n||(e[s]=n),e},{});return v(n,a,null==l?void 0:null===(t=l.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:s,className:n,...l}=t;return Object.entries(l).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...r,...i}[t]):({...r,...i})[t]===s})?[...e,s,n]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),j=a.forwardRef((e,t)=>{let{className:s,variant:n,size:l,asChild:a=!1,...i}=e,o=a?f:"button";return(0,r.jsx)(o,{className:(0,b.cn)(y({variant:n,size:l,className:s})),ref:t,...i})});j.displayName="Button"},5186:function(e,t,s){"use strict";s.d(t,{I:function(){return a}});var n=s(7437),l=s(2265),r=s(4508);let a=l.forwardRef((e,t)=>{let{className:s,type:l,...a}=e;return(0,n.jsx)("input",{type:l,className:(0,r.cn)("flex h-9 w-full rounded-md border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});a.displayName="Input"},6815:function(e,t,s){"use strict";s.d(t,{_:function(){return a}});var n=s(7437),l=s(2265),r=s(4508);let a=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,n.jsx)("label",{ref:t,className:(0,r.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...l})});a.displayName="Label"},6818:function(e,t,s){"use strict";s.d(t,{g:function(){return a}});var n=s(7437),l=s(2265),r=s(4508);let a=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,n.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-slate-200 bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});a.displayName="Textarea"},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var n=s(1994),l=s(3335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.m6)((0,n.W)(t))}},2119:function(e,t,s){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return l}});let n=s(3079);function l(e){let{createServerReference:t}=s(6671);return t(e,n.callServer)}},8575:function(e,t,s){"use strict";s.d(t,{F:function(){return r},e:function(){return a}});var n=s(2265);function l(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function r(...e){return t=>{let s=!1,n=e.map(e=>{let n=l(e,t);return s||"function"!=typeof n||(s=!0),n});if(s)return()=>{for(let t=0;t<n.length;t++){let s=n[t];"function"==typeof s?s():l(e[t],null)}}}}function a(...e){return n.useCallback(r(...e),e)}}},function(e){e.O(0,[137,971,117,744],function(){return e(e.s=2529)}),_N_E=e.O()}]);