(()=>{var e={};e.id=544,e.ids=[544],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},629:e=>{"use strict";e.exports=require("fs/promises")},5315:e=>{"use strict";e.exports=require("path")},7617:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o}),s(1476),s(3585),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),l=s(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["decisions",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1476)),"/Users/titusay/Coding Projects/doctest/app/decisions/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3585)),"/Users/titusay/Coding Projects/doctest/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/titusay/Coding Projects/doctest/app/decisions/[id]/page.tsx"],u="/decisions/[id]/page",f={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/decisions/[id]/page",pathname:"/decisions/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6606:(e,t,s)=>{let r={f157c3bac344d618a0fab32f45388c8b92972969:()=>Promise.resolve().then(s.bind(s,9263)).then(e=>e.uploadEvidence)};async function a(e,...t){return(await r[e]()).apply(null,t)}e.exports={f157c3bac344d618a0fab32f45388c8b92972969:a.bind(null,"f157c3bac344d618a0fab32f45388c8b92972969")}},3564:(e,t,s)=>{Promise.resolve().then(s.bind(s,9629)),Promise.resolve().then(s.bind(s,3104))},6764:(e,t,s)=>{Promise.resolve().then(s.bind(s,8699))},3034:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},9629:(e,t,s)=>{"use strict";s.d(t,{EvidenceSection:()=>b});var r=s(326),a=s(7577),i=s(7863);let n=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("rounded-xl border bg-white shadow-sm ring-1 ring-slate-900/5",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:(0,i.cn)("font-semibold leading-none tracking-tight text-slate-900",e),...t}));d.displayName="CardTitle",a.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-slate-500",e),...t})).displayName="CardDescription";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";var c=s(772),u=s(2881);let f=(0,u.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),p=(0,u.Z)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var x=s(6283);s(5424);var m=(0,s(6242).$)("f157c3bac344d618a0fab32f45388c8b92972969"),h=s(4432);function b({decisionId:e,initialEvidence:t}){let[s,i]=(0,a.useState)(!1);return(0,r.jsxs)(n,{children:[(0,r.jsxs)(l,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(d,{className:"text-base",children:"Supporting Evidence"}),r.jsx(c.z,{variant:"ghost",size:"sm",onClick:()=>i(!s),children:r.jsx(f,{className:"h-4 w-4"})})]}),(0,r.jsxs)(o,{className:"space-y-4",children:[s&&(0,r.jsxs)("form",{action:async t=>{t.append("decisionId",e),await m(t),i(!1)},className:"p-3 bg-slate-50 rounded-lg border space-y-3",children:[r.jsx(h.I,{name:"file",type:"file",required:!0,className:"text-xs"}),r.jsx(h.I,{name:"notes",placeholder:"Description/Notes",className:"text-xs"}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[r.jsx(c.z,{size:"sm",variant:"ghost",onClick:()=>i(!1),children:"Cancel"}),r.jsx(c.z,{size:"sm",type:"submit",children:"Upload"})]})]}),r.jsx("div",{className:"space-y-2",children:0===t.length?r.jsx("p",{className:"text-sm text-slate-400 italic",children:"No evidence attached."}):t.map(e=>r.jsx("div",{className:"group flex items-center justify-between p-2 rounded-md hover:bg-slate-50 border border-transparent hover:border-slate-100 transition-colors",children:(0,r.jsxs)("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 overflow-hidden",children:["LINK"===e.fileType?r.jsx(p,{className:"h-4 w-4 text-blue-500"}):r.jsx(x.Z,{className:"h-4 w-4 text-slate-400"}),(0,r.jsxs)("div",{className:"truncate",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:e.fileName}),e.notes&&r.jsx("p",{className:"text-xs text-slate-400",children:e.notes})]})]})},e.id))})]})]})}},8699:(e,t,s)=>{"use strict";s.d(t,{AppShell:()=>p});var r=s(326),a=s(434),i=s(5047),n=s(7863),l=s(4319),d=s(6343),o=s(1739),c=s(8378),u=s(6283);function f(){let e=(0,i.usePathname)(),t=[{href:"/",label:"Dashboard",icon:l.Z},{href:"/decisions",label:"Decisions",icon:d.Z},{href:"/audits",label:"Audit Explanations",icon:o.Z},{href:"/settings",label:"Settings",icon:c.Z}];return(0,r.jsxs)("div",{className:"flex h-full w-64 flex-col border-r bg-white text-slate-800",children:[r.jsx("div",{className:"flex h-16 items-center border-b px-6",children:(0,r.jsxs)(a.default,{href:"/",className:"flex items-center gap-2 font-bold text-xl text-slate-900",children:[r.jsx(u.Z,{className:"h-6 w-6 text-indigo-600"}),r.jsx("span",{children:"TaxDocs"})]})}),r.jsx("nav",{className:"flex-1 space-y-1 p-4",children:t.map(t=>{let s=t.icon,i=e===t.href||e.startsWith(`${t.href}/`);return(0,r.jsxs)(a.default,{href:t.href,className:(0,n.cn)("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors",i?"bg-slate-100 text-indigo-600":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[r.jsx(s,{className:(0,n.cn)("h-5 w-5",i?"text-indigo-600":"text-slate-400")}),t.label]},t.href)})}),r.jsx("div",{className:"border-t p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 px-3",children:[r.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-200"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"User"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Viewer"})]})]})})]})}function p({children:e}){return(0,r.jsxs)("div",{className:"flex h-screen overflow-hidden bg-slate-50",children:[r.jsx(f,{}),r.jsx("main",{className:"flex-1 overflow-y-auto",children:e})]})}},3104:(e,t,s)=>{"use strict";s.d(t,{Header:()=>a});var r=s(326);function a({title:e,children:t}){return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-white px-8",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:e}),r.jsx("div",{className:"flex items-center gap-4",children:t})]})}},772:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var r=s(326),a=s(7577),i=s(4214),n=s(9360),l=s(7863);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-slate-900 text-slate-50 shadow hover:bg-slate-900/90",destructive:"bg-red-500 text-slate-50 shadow-sm hover:bg-red-500/90",outline:"border border-slate-200 bg-white shadow-sm hover:bg-slate-100 hover:text-slate-900",secondary:"bg-slate-100 text-slate-900 shadow-sm hover:bg-slate-100/80",ghost:"hover:bg-slate-100 hover:text-slate-900",link:"text-slate-900 underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...n},o)=>{let c=a?i.g7:"button";return r.jsx(c,{className:(0,l.cn)(d({variant:t,size:s,className:e})),ref:o,...n})});o.displayName="Button"},4432:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var r=s(326),a=s(7577),i=s(7863);let n=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Input"},7863:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(1135),a=s(1009);function i(...e){return(0,a.m6)((0,r.W)(e))}},9263:(e,t,s)=>{"use strict";s.r(t),s.d(t,{uploadEvidence:()=>d});var r=s(7745);s(6461);var a=s(8296),i=s(207),n=s(629),l=s(5315);async function d(e){let t=e.get("file"),s=e.get("notes"),r=e.get("decisionId");if(!t)return;let d=await t.arrayBuffer(),o=Buffer.from(d),c=(0,l.join)(process.cwd(),"public/uploads"),u=`${Date.now()}-${t.name.replace(/\s/g,"-")}`,f=(0,l.join)(c,u);try{await (0,n.writeFile)(f,o)}catch(e){console.error("Upload error",e);return}await a.db.evidence.create({data:{fileName:t.name,fileUrl:`/uploads/${u}`,fileType:t.type,notes:s,decisionId:r||void 0}}),(0,i.revalidatePath)("/decisions"),(0,i.revalidatePath)(`/decisions/${r}`)}(0,s(5723).h)([d]),(0,r.j)("f157c3bac344d618a0fab32f45388c8b92972969",d)},1476:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(9510),a=s(8585),i=s(9487),n=s(1085),l=s(6697);let d=(0,s(8570).createProxy)(String.raw`/Users/titusay/Coding Projects/doctest/components/evidence/EvidenceSection.tsx#EvidenceSection`);var o=s(3853);async function c({params:e}){let t=await i.db.decision.findUnique({where:{id:e.id},include:{evidence:!0}});return t||(0,n.notFound)(),(0,r.jsxs)("div",{className:"bg-slate-50 min-h-screen pb-12",children:[r.jsx(a.h,{title:"Decision Details"}),(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-8 space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:t.title}),r.jsx("p",{className:"text-lg text-slate-500 mt-2",children:t.summary})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-semibold bg-indigo-100 text-indigo-700",children:t.status}),(0,r.jsxs)("span",{className:"text-sm text-slate-400",children:["Updated ",(0,o.WU)(t.updatedAt,"MMM d, yyyy")]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2 space-y-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-8 prose prose-slate max-w-none",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4 not-prose",children:"Rationale"}),r.jsx("div",{className:"whitespace-pre-wrap text-slate-700 leading-relaxed",children:t.rationale})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{className:"text-base",children:"Metadata"})}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Tax Type"}),r.jsx("p",{className:"font-medium",children:t.taxType||"N/A"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Jurisdiction"}),r.jsx("p",{className:"font-medium",children:t.jurisdiction||"Global"})]})]})]}),r.jsx(d,{decisionId:t.id,initialEvidence:t.evidence})]})]})]})]})}},3585:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>d});var r=s(9510),a=s(5384),i=s.n(a);s(7272);let n=(0,s(8570).createProxy)(String.raw`/Users/titusay/Coding Projects/doctest/components/layout/AppShell.tsx#AppShell`);var l=s(650);let d={title:"Tax Knowledge Store",description:"Internal document store for tax decisions, audit explanations, and supporting evidence."};function o({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:(0,l.cn)("min-h-screen bg-slate-50 text-slate-900 antialiased",i().className),children:r.jsx(n,{children:e})})})}},8585:(e,t,s)=>{"use strict";s.d(t,{h:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/titusay/Coding Projects/doctest/components/layout/Header.tsx#Header`)},6697:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,Zb:()=>n,aY:()=>o,ll:()=>d});var r=s(9510),a=s(1159),i=s(650);let n=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("rounded-xl border bg-white shadow-sm ring-1 ring-slate-900/5",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:(0,i.cn)("font-semibold leading-none tracking-tight text-slate-900",e),...t}));d.displayName="CardTitle",a.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-slate-500",e),...t})).displayName="CardDescription";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},8296:(e,t,s)=>{"use strict";s.d(t,{db:()=>a});var r=s(3524);let a=globalThis.prisma||new r.PrismaClient},9487:(e,t,s)=>{"use strict";s.d(t,{db:()=>a});var r=s(3524);let a=globalThis.prisma||new r.PrismaClient},650:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(5761),a=s(2386);function i(...e){return(0,a.m6)((0,r.W)(e))}},1085:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{ReadonlyURLSearchParams:function(){return n},RedirectType:function(){return r.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return r.permanentRedirect},redirect:function(){return r.redirect}});let r=s(3953),a=s(6399);class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{isNotFoundError:function(){return a},notFound:function(){return r}});let s="NEXT_NOT_FOUND";function r(){let e=Error(s);throw e.digest=s,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===s}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return s}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3953:(e,t,s)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{RedirectType:function(){return r},getRedirectError:function(){return d},getRedirectStatusCodeFromError:function(){return x},getRedirectTypeFromError:function(){return p},getURLFromRedirectError:function(){return f},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return o}});let a=s(4580),i=s(2934),n=s(8586),l="NEXT_REDIRECT";function d(e,t,s){void 0===s&&(s=n.RedirectStatusCode.TemporaryRedirect);let r=Error(l);r.digest=l+";"+t+";"+e+";"+s+";";let i=a.requestAsyncStorage.getStore();return i&&(r.mutableCookies=i.mutableCookies),r}function o(e,t){void 0===t&&(t="replace");let s=i.actionAsyncStorage.getStore();throw d(e,t,(null==s?void 0:s.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let s=i.actionAsyncStorage.getStore();throw d(e,t,(null==s?void 0:s.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,s,r,a]=e.digest.split(";",4),i=Number(a);return t===l&&("replace"===s||"push"===s)&&"string"==typeof r&&!isNaN(i)&&i in n.RedirectStatusCode}function f(e){return u(e)?e.digest.split(";",3)[2]:null}function p(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function x(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,774,19,853],()=>s(7617));module.exports=r})();